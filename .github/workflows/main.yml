name: Build documentation

on:
  push:
    branches:
    - master

jobs:

  build:
 
    runs-on: ubuntu-latest
 
    steps:
    - uses: actions/checkout@v1
    - name: build-push
      uses: docker/build-push-action@v1
      with:
        username: ${{ secrets.DOCKER_USERNAME }}
        password: ${{ secrets.DOCKER_PASSWORD }}
        registry: docker.io
        repository: lanrell/ssc
        tag_with_sha: true
        
  deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - uses: mgenteluci/cloudformation-deploy-action@v1.3.0
      env:
        AWS_STACK_NAME: 'sylvain-stack'
        AWS_REGION: 'us-east-1'
        AWS_ACCESS_KEY_ID: ASIA3LTHPFHCD7ONMYNT
        AWS_SECRET_ACCESS_KEY: P/3VnadxQDlxbA0wGj35Q/OypH2HQ+rQF6GVaauU
        AWS_DEPLOY_BUCKET: githubactionsoui
        AWS_BUCKET_PREFIX: stacks/ssc
        PARAMETER_OVERRIDES: AliasName=ssc
