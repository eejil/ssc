name: Build documentation

on:
  push:
    branches:
    - master

jobs:

  build:
 
    runs-on: ubuntu-latest
 
    steps:
    - uses: actions/checkout@v1
    - name: build-push
      uses: docker/build-push-action@v1
      with:
        username: ${{ secrets.DOCKER_USERNAME }}
        password: ${{ secrets.DOCKER_PASSWORD }}
        registry: docker.io
        repository: lanrell/ssc
        tag_with_sha: true
        
  deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - uses: mgenteluci/cloudformation-deploy-action@v1.3.0
      env:
        AWS_STACK_NAME: 'sylvain-stack'
        AWS_REGION: 'us-east-1'
        AWS_ACCESS_KEY_ID: ASIA3LTHPFHCD7ONMYNT
        AWS_SECRET_ACCESS_KEY: P/3VnadxQDlxbA0wGj35Q/OypH2HQ+rQF6GVaauU
        AWS_SESSION_TOKEN: FwoGZXIvYXdzEBAaDJM54ys7WqTVdt54QCLMAf92Ku22D+43SNwHa0U1bdQQLqZZm1Ic/erSO0/z546FutKyzYRJpDZLaNZ/65lUGl0jEJmJMtb7vjVJgrNAGmJxeLoR/6/uWIaBe5Bf5Dw/N6e6hCMqeQnum3dfL2d7HCffXtO3IuNxglEXDKD0PtO7d+n7CElbwl48w/v9PcVJ8md7wpQc7QdjYEyYUtM/vPCm2JQINp5evdvzP6ikp09AeqNbXwOODtH1+TorltCv0lEr2I3+KtLENhCKJHUPaeGGFxiI/2P3y5luSyjspPr0BTItpA4/gAEBTz7lrvZhF3+ubd9gDNfQMKq4w8MVLi3TSTJB07uVXRb6t89l8H2i
        AWS_DEPLOY_BUCKET: githubactionsoui
        AWS_BUCKET_PREFIX: stacks/ssc
        PARAMETER_OVERRIDES: AliasName=ssc
